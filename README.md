# Проект для тестового задания QA Automation


Структура проекта
----------------------------------------------------------
```
├── common
│   ├── checkers.py - чекеры
│   ├── constants.py - константы для работы тестов
│   ├── errors.py - константы ошибок для тестов
│   └── helpers.py - помощники для тестирования
├── fixtures
│    └── fixtures.py - фикстуры для генерации юзеров, запросов и пр.
├── schemas - модели pydantic для генерации запросов и валидации ответов
│   ├── schema.py - модели запросов
│   ├── incorrect.py - модели запросов с недопустимыми типами данных
│   └── response.py - модели ответов
├── tests
│   ├── test_add_method.py - тесты на добавление пользователя
│   ├── test_delete_method.py - тесты на удаление пользователя
│   ├── test_select_method.py - тесты на получение выборки пользователей
│   └── test_update_method.py - тесты на обновление пользователя
├── Pipfile - зависимости проекта
├── Pipfile.lock - зависимости проекта
├── README.md - этот файл
├── pyproject.toml - настройки линтера black
├── conftest.py - общие фикстуры, клиент api и пр.
├── constants.py - константы для работы тестов
├── Makefile - команды для запуска тестов и окружения
├── settings.py - настройки для запуска тестов
└── setup.cfg - настройки pytest и линтеров

```


## Инструкция по запуску тестов

**Требования**

* Python 3.8, 
* pipenv
* make для удобства запуска тестов
* allure для генерации отчётов о тестировании

**Настраиваем виртуальную среду**
  - Создаем виртуальное окружение с помощью pipenv
  
    `pipenv shell`
  
  - Устанавливаем зависимости
  
    `pipenv sync`

## Варианты запуска тестов
* Запуск тестов с локально запущенным приложением

  * Запуск с помощью make (предполагается, что приложение расположено на верхнем уровне директории проекта)
    - Прогнать все тесты с локальным запуском приложения
  
        `make run -k`

    - Прогнать все тесты с локальным запуском приложения и генерацией отчётов allure
  
        `make run_allure -k`
  
  * Запуск тестов без make
    - Прогнать все тесты
  
        `pytest .`
    
    - прогнать конкретный тест
       
        `pytest -vv tests/test_add_method.py -k test_failure_add_user_wrong_structure`
  


## CodeStyle

* В качестве линтеров используются black, isort и flake8
* Проще всего вызывать все три команды так: `isort . && black . && flake8`